<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>There and back again—how to preserve your data during transformations</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tinos:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../../../css/site.css">

  <!-- citation information -->
  <link rel="canonical" href="https://anthology.ach.org/volumes/vol0002/there-back-again-how-to-preserve-your-data-during/">
  <meta name="citation_title" content="There and back again—how to preserve your data during transformations">
  <meta name="citation_date" content="2025">
  <meta name="citation_public_url" content="https://anthology.ach.org/volumes/vol0002/there-back-again-how-to-preserve-your-data-during/">
  <meta name="citation_journal_title" content="Anthology of Computers and the Humanities">
  <meta name="citation_issn" content="">
  <meta name="citation_volume" content="2">
  <meta name="citation_firstpage" content="6">
  <meta name="citation_lastpage" content="12">
  <meta name="citation_doi" content="10.63744/GJCCSMz4QBbD">
  <meta name="citation_author" content="Casties, Robert">
  
  <meta name="citation_editor" content="Damerow, Julia">
  <meta name="citation_editor" content="Koeser, Rebecca Sutton">
  
  <meta name="citation_abstract" content="Abstract Datasets often need to be transformed—from an external file format into a database, from one database system into another, or from an outdated legacy system into an archive format. All transformations carry the risk of data corruption through software errors. What can software developers do to check data integrity and make sure that data is not lost or changed in the process? This paper presents three basic approaches with different degrees of accuracy and complexity, illustrated by real-world examples. The first example shows simple end-to-end statistics by counting entities during the import of a dataset into a database, the next more complex example shows bookkeeping of entities during the conversion of an HTML website, and the last a full round-trip migration and comparison of a project database and data model.">
  <meta name="citation_language" content="en">
  <meta name="citation_keywords" content="software; best practice; data integrity; digital humanities">
  <meta name="citation_fulltext_html_url" content="https://anthology.ach.org/volumes/vol0002/there-back-again-how-to-preserve-your-data-during/">
  <meta name="citation_pdf_url" content="https://anthology.ach.org/volumes/vol0002/there-back-again-how-to-preserve-your-data-during/10.63744@GJCCSMz4QBbD.pdf">

  <!-- Lightbox CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css" />

  <!-- Pandoc syntax highlighting CSS -->
  <link rel="stylesheet" href="../../../css/syntax-highlighting.css" />

  <style>
    /* Custom styles for better lightbox integration */
    figure {
      text-align: center;
      margin: 2em 0 3em 0;
    }

    figure img {
      cursor: pointer;
      transition: opacity 0.3s ease;
    }

    figure img:hover {
      opacity: 0.85;
    }

    figcaption {
      margin-top: 0.5em;
      font-style: italic;
      color: #666;
    }

    /* Table caption styling - match figure captions */
    table {
      caption-side: bottom;
    }

    table caption {
      margin-top: 0.5em;
      margin-bottom: 0;
      font-style: italic;
      color: #666;
    }

    /* Center wide tables in the viewport */
    div[id^="tab:"] {
      position: relative;
      left: 50%;
      transform: translateX(-50%);
      width: fit-content;
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
      margin-bottom: 2em;
    }

    /* Prevent text wrapping in table cells */
    div[id^="tab:"] table td,
    div[id^="tab:"] table th {
      white-space: nowrap;
    }

    /* Enhanced code block styles */
    .sourceCode {
      position: relative;
      background-color: #f5f5f5;
      border-radius: 6px;
      padding: 1em;
      margin: 1em 0;
      overflow-x: auto;
    }

    pre.sourceCode {
      margin: 0;
      padding: 0;
      background-color: transparent;
    }

    code.sourceCode {
      background-color: transparent;
      padding: 0;
    }

    /* Styles for code blocks wrapped in figures (auto-generated structure) */
    figure.float.listing {
      text-align: left;
      margin: 2em 0;
    }

    div.float-body.listing {
      position: relative;
      background-color: #f5f5f5;
      border-radius: 6px;
      padding: 1em;
      margin: 0;
      overflow-x: auto;
    }

    figure.float.listing pre {
      margin: 0;
      padding: 0;
      background-color: transparent;
      overflow: visible;
    }

    figure.float.listing code {
      background-color: transparent;
      padding: 0;
      font-family: 'Courier New', Courier, monospace;
      font-size: 0.9em;
      line-height: 1.5;
    }

    /* Make sure syntax highlighting applies to code in figures */
    figure.float.listing pre > code {
      white-space: pre;
      position: relative;
    }

    /* Copy button styles */
    .code-copy-button {
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 6px;
      background-color: #ffffff;
      border: 1px solid #d0d0d0;
      border-radius: 3px;
      cursor: pointer;
      font-size: 12px;
      color: #333;
      transition: all 0.2s ease;
      z-index: 10;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      line-height: 1;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .code-copy-button:hover {
      background-color: #e8e8e8;
      border-color: #b0b0b0;
    }

    .code-copy-button:active {
      background-color: #d8d8d8;
    }

    .code-copy-button.copied {
      background-color: #4CAF50;
      color: white;
      border-color: #4CAF50;
    }

    .csl-entry {
      display: flex;
      align-items: flex-start;
      margin-bottom: 0.5em; /* optional: adds space between entries */
    }

    .csl-left-margin {
      width: 2.5em;       /* adjust for number width, e.g. [10] */
      flex-shrink: 0;     /* don’t let the number area shrink */
    }

    .csl-right-inline {
      flex: 1;
      padding-left: 0.5em;  /* small gap between number and text */
      text-indent: -0.5em;  /* hanging indent effect */
      margin-left: 0.5em;   /* pushes the block right a bit */
    }
  </style>


</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://ach.org">
        <img src="../../../logo/logo.png" alt="ACH Logo">
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu" id="navbarMain">
      <div class="navbar-start">
      </div>
      <div class="navbar-end">
        <a class="navbar-item" href="https://anthology.ach.org/">
          <b>Home</b>
        </a>
        <a class="navbar-item" href="https://anthology.ach.org/volumes/vol0001">
          <b>Volumes</b>
        </a>
        <a class="navbar-item" href="https://anthology.ach.org/about">
          <b>About</b>
        </a>
        <span style="width: 25px"></span>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-body">
      <div class="container">
        <p class="subtitle is-6 has-text-grey">Anthology of Computers and the Humanities · <a href="..">Volume 2</a></p>
        <h1 class="title paper-title">There and back again—how to preserve your data during transformations</h1>

        <div class="is-size-5 pl-7 has-text-centered">
          <a href="https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;"><img style="height:25px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/png/by.png"></a>
        </div>
      </div>

    </div>
  </section>

  <!-- Main Content -->
  <section class="section">
    <div class="container">

      <div class="paper-meta">
        <div class="authors-container">
          <div class="authors">
            <section class="authors-block">
              <p class="authors">
                  <span class="author">
                    Robert Casties<sup></sup><a class="orcid-link" href="https://orcid.org/0009-0008-9370-1303" target="_blank" rel="noopener">
                        <img class="orcid" src="../../../data/orcid.png" alt="ORCID">
                      </a>
                  </span>
              </p>

              <ul class="affiliations">
                  <li><sup>1</sup> Digital Humanities Team, Max Planck Institute for History of Science, Berlin, Germany</li>
              </ul>
            </section>

          </div>
        </div>
      </div>


      <!-- Download Buttons -->
      <div class="buttons-container">
        <a href="10.63744@GJCCSMz4QBbD.pdf" class="button is-primary" target="_blank">
          <span class="icon">
            <i class="fas fa-file-pdf"></i>
          </span>
          <span>Download PDF</span>
        </a>
        <a href="10.63744@GJCCSMz4QBbD.bib" class="button is-info" target="_blank">
          <span class="icon">
            <i class="fas fa-file-code"></i>
          </span>
          <span>Download Citation</span>
        </a>
        
      </div>

      <!-- DOI -->
      <div class="doi-box">
        <p class="is-size-6">
          <b>Permanent Link:</b> <a class="doi-link" href="https://doi.org/10.63744/GJCCSMz4QBbD" target="_blank">https://doi.org/10.63744/GJCCSMz4QBbD</a>
        </p>
        <p class="is-size-6">
          <b>Published:</b> 17 October 2025
        </p>
      </div>

      <!-- Abstract -->
      <div class="content">
         <div class="abs">
<span>Abstract</span>
<p>Datasets often need to be transformed—from an external file format
into a database, from one database system into another, or from an
outdated legacy system into an archive format. All transformations carry
the risk of data corruption through software errors. What can software
developers do to check data integrity and make sure that data is not
lost or changed in the process? This paper presents three basic
approaches with different degrees of accuracy and complexity,
illustrated by real-world examples. The first example shows simple
end-to-end statistics by counting entities during the import of a
dataset into a database, the next more complex example shows bookkeeping
of entities during the conversion of an HTML website, and the last a
full round-trip migration and comparison of a project database and data
model.</p>
</div>
<h1 data-number="1" id="introduction"><span
class="header-section-number">1</span> Introduction</h1>
<p>Digital Humanities projects work with many kinds of data. But the
data is very rarely created, processed, visualized, backed up and
archived in a single format in only one computer system. It is almost
always transformed in one or more steps between formats and systems. The
journey starts when data is loaded into a database from a source file in
a structured format like XML, JSON, or CSV or an unstructured format
like plain text. This process is also often called ETL (extract,
transform, load). The journey continues when data is migrated from one
database system to a different one or from one data model to another and
it may end when the data is migrated into an archival format for
long-term preservation or other data export formats for users to
download and process. Each of these transformations carries the risk of
inadvertent loss or corruption of data.</p>
<p>Most data transformations are done by software, often by multiple
pieces of software by different authors. The integrity of transformed
data depends therefore on the correctness of the software. The
importance of software and of the correctness of software for the
Digital Humanities has been argued more generally in the context of
improving software quality through code review <span class="citation"
data-cites="damerow_code_2025">[<a href="#ref-damerow_code_2025"
role="doc-biblioref">1</a>]</span>. Code review and software tests as
another element of good practice in software engineering often
concentrate on small pieces of code and test small units with synthetic
pieces of data. Software testing typically starts with isolated unit
testing followed by more encompassing integration testing and system
testing <span class="citation"
data-cites="leloudas_introduction_2023">[<a
href="#ref-leloudas_introduction_2023"
role="doc-biblioref">2</a>]</span>. Testing data transformation
integrity is not explicitly mentioned, but it could be considered a type
of end-to-end or system test where full, real input data is compared
with the transformed output.</p>
<p>In the following, I present three basic methods that were applied in
different projects to detect data loss and corruption in the data
transformation process. The methods range from simple and easy to
implement counting techniques to the development of rather complex and
work-intensive re-transformation and comparison tools. The costs and
benefits of applying each method have to be considered in the context of
the specific project and development constraints, as in all software
engineering decisions. The effort of considering and implementing
measures to detect data loss and corruption was motivated by the need
for insights into the migration process during the development cycle and
by cases of real data loss in production.</p>
<h1 data-number="2" id="forms-of-data-loss-and-corruption"><span
class="header-section-number">2</span> Forms of data loss and
corruption</h1>
<p>Inadvertent changes to data can be categorized into basic
categories:</p>
<ul>
<li><p>Entries are dropped (fewer than before)</p></li>
<li><p>Entries are added (more than before)</p></li>
<li><p>Entries are corrupted (same number but different content)</p>
<ul>
<li><p>Dropped, added, or corrupted attributes</p></li>
<li><p>Dropped, added, or corrupted relations</p></li>
</ul></li>
</ul>
<p>Depending on the system and data model, what is considered an entry
can vary and attributes or relations of entities may not be strictly
applicable. The concept of an entry being an entity with attributes that
are simple data fields like strings or numbers and separate relations or
references between entities works well for label-graph data models in
graph databases like Neo4J or RDF and for object-oriented models in
systems like Django<a href="#fn1" class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a> that are translated into more
elaborate relational database schemas behind the scenes. The concept
does not necessarily apply to the transformation of HTML or XML. The
basic categories of dropped, added, and corrupted entries apply more
generally.</p>
<h1 data-number="3"
id="method-1-count-entities-before-and-after-transformation"><span
class="header-section-number">3</span> Method 1: Count entities before
and after transformation</h1>
<p>The simplest method is to count the entities in the data set before
and after the transformation and to compare the counts. This method is
easy to implement and able show data loss through dropped or added
entities, but it cannot detect data corruption within the entities.
Cases when an equal number of entities are added and dropped cannot be
detected by this method. The impact of these issues can be reduced if
groups of entities are counted and compared separately. In the example
below, different types of entities are counted separately so that an
added PLACE entity at the same time as a dropped PERSON entity would be
detected even if the total number of entities stays the same.</p>
<p>An example for this method is the import process of an XML data file
into a Drupal<a href="#fn2" class="footnote-ref" id="fnref2"
role="doc-noteref"><sup>2</sup></a> database. The project in question
uses separate systems based on different technologies: a ResearchSpace<a
href="#fn3" class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a> front end used by the domain experts
for creating and editing the full dataset as CIDOC-CRM<a href="#fn4"
class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> RDF
data, and a Drupal website for the public presentation of the project
results.</p>
<p>The ResearchSpace data curation interface creates a custom XML
formatted data dump every night, which is imported into the Drupal
website database. The import process is implemented using a bash script
that extracts the entity count from the XML file for each entity type.
In this case the script uses the existing <code>count</code> attribute
in the custom XML format as seen in
Listing <a href="#code:xml-fragment">1</a>, but it would also be
possible to use an XML processor to count the relevant XML tags. After
the import process the script runs a <code>drush</code> command to
extract the count of Drupal entities of the same type using a custom
view as seen in Listing <a href="#code:ismi-cnt">2</a> and compares the
resulting numbers. The script then creates an error notification if the
numbers for each entity type do not match.</p>
<figure class="float listing" id="code:xml-fragment">
<div class="float-body listing">
<pre><code class="language-xml">&lt;openmind-data version="5.1"&gt;
  &lt;entities count="300"&gt;
    &lt;entity public="true" object-class="PLACE" id="1001961"&gt;Salähiyya madrasa
...</code></pre>
 

</div>
<figcaption>Listing 1: XML file fragment with entity count (top), and Drupal entity count command (bottom) for entities of type PLACE.</figcaption>
</figure>
<figure class="float listing" id="code:ismi-cnt">
<div class="float-body listing">
<pre><code class="language-bash">$ drush views:execute count_entities count_entities_csv place
count
300</code></pre>
 

</div>
<figcaption>Listing 2: drush command to extract the count of Drupal entities by type.</figcaption>
</figure>
<h1 data-number="4"
id="method-2-track-of-entities-during-transformation-steps"><span
class="header-section-number">4</span> Method 2: Track of entities
during transformation steps</h1>
<p>An intermediate method is internal bookkeeping in a transformation
script. It is often possible to create counts and lists of items as they
are read and compare these numbers or lists to the results of later
stages of the transformation process. This method can detect dropped or
added entities and, depending on the implementation, also some cases of
corrupted entities. If items can be identified and kept in lists or sets
it is possible to differentiate between added and dropped items and
identify which items were added or dropped even if the total count stays
the same.</p>
<p>An example is a migration script that processes hundreds of HTML
files that are the result of web scraping and a separate JSON file
containing the navigation hierarchy exported from a dynamic legacy
Zope<a href="#fn5" class="footnote-ref" id="fnref5"
role="doc-noteref"><sup>5</sup></a> website. The migration script uses
the HTML and JSON input files to create a corrected static HTML website.
The script reads the navigation hierarchy file and the raw HTML files
and processes the HTML by comparing links to other HTML files within the
navigation hierarchy data to create correct links, omit duplicated
files, and find broken links.</p>
<figure class="float listing" id="code:echo-loop">
<div class="float-body listing">
<pre><code class="language-python"># check all links
links = set()
nav_path = nav_item['echo_path']
for atag in soup.find_all('a'):
    if 'href' in atag.attrs:
        link = atag['href'].strip()
...
        # process interactive map links
        if 'onmouseover' in atag.attrs:
            # get linked item from id
            m = maplink_id_pattern.match(atag['id'])
            if m:
                nav_link = nav_path + '/' + m.group(1).replace(' ', '%20')
                if nav_link in args.nav_struct:
                    link_item = args.nav_struct[nav_link]
                    if link_item['type'] == 'ECHO_resource':
                        if 'link' in link_item and 'digilib.html?' in link_item['link']:
                            # replace link to ECHO_resource linking to digilib
                            atag['href'] = link_item['link']
                            processed_items.add(nav_link)
                            continue
...                        
        # add to be processed later
        links.add(link)</code></pre>


  
</div>
<figcaption>Listing 3: Python script fragment showing a loop processing all a tags in an HTML document and adding a processed item.</figcaption>
</figure>
<p>During the process the script keeps a list of processed HTML files,
and the links in each file, indexed by URL, as a Python set.
Listing <a href="#code:echo-loop">3</a> shows a part of the main loop
running through all HTML <code>a</code> tags representing links in a
document, fixing the links and adding the successfully processed links
to the set of processed links.</p>
<figure class="float listing" id="code:echo-tracking">
<div class="float-body listing">
<pre><code class="language-python"># initialize processed_items with ignore_items
args.processed_items = set(args.ignore_items)

args.processed_files = set()
# process files starting at index page
start_file = args.echo_section + '/index.html'
logging.info(f"start processing at {start_file}")
start_file = args.html_files[start_file]
# process files (modifies args.processed_items and args.processed_files)
process_files(start_file, in_path, out_path, args)
...
# check number of unprocessed items
unprocessed_items = set(args.nav_struct.keys()) - args.processed_items</code></pre>
  
  
</div>
<figcaption>Listing 4: Python script fragment with a highlighted set of processed items and set math to determine unprocessed items.</figcaption>
</figure>
<p>This makes it possible to compare the number of processed items to
the expected total based on the navigation hierarchy data. Since files
and links are identified by URL, processed links can be removed from the
expected links in the navigation hierarchy using set operations to
generate the set of unprocessed items, as shown in
Listing <a href="#code:echo-tracking">4</a>. This method can therefore
also show errors in cases where an HTML file name or link is different
from the navigation structure URL, which a simple count would not
reveal.</p>
<h1 data-number="5"
id="method-3-round-trip-entities-and-compare-to-the-source-format"><span
class="header-section-number">5</span> Method 3: Round-trip entities and
compare to the source format</h1>
<p>The most comprehensive and also most time-consuming strategy to test
a transformation from one format into another is the development and
application of an inverse transformation that converts the result format
back into the source format and allows to compare the result to the
original dataset in the original format. This method is the most
comprehensive because it allows to check for data corruption in the
entities as well as for data loss. The method is also time-consuming
because it requires the development of an additional transformation step
that can be similarly complex to the original transformation.</p>
<p>An example for this case is the migration of the ISMI<a href="#fn6"
class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>
project database from a legacy custom database software called OpenMind
using a label-graph data model into a standard CIDOC-CRM based data
model in RDF with a ResearchSpace front end. The biggest challenges in
developing and testing this transformation were differences in the data
models. The original label-graph data model consisted of about 40,000
nodes of 18 types with 60,000 relations whereas the resulting CIDOC-CRM
data model consisted of about 900,000 RDF triples of 100 ontology
classes. In the label-graph model a node of type <code>person</code> has
an attribute <code>name</code> containing the name as a string while in
the CIDOC-CRM model a Person URI has a relation to an Appellation URI
that has a relation to a Literal containing the name. There are
additional differences between the old data model and the new standard
model that required multiple entities for each text and witness entity
in the new FRBRoo-based<a href="#fn7" class="footnote-ref" id="fnref7"
role="doc-noteref"><sup>7</sup></a> model.</p>
<p>The original migration from OpenMind to CIDOC-CRM used the X3ML<a
href="#fn8" class="footnote-ref" id="fnref8"
role="doc-noteref"><sup>8</sup></a> tool and language to create RDF. To
check the results of this transformation, I developed an additional
transformation from RDF back into the original OpenMind data model and a
comparison tool to show differences in the resulting data sets using
Python. Figure <a href="#fig:ismi-round-trip">1</a> shows a diagram of
the full process.</p>
<p>The ability to run this test was an invaluable asset during the
development of the migration mapping. It allowed to find bugs in the
initial mapping and to refactor the mapping incrementally to better
align with requirements of the ResearchSpace front end, in the knowledge
that any data corruption in the process would become immediately
visible. The functional role that tests can have during software
development is emphasized even more in methods like Test Driven
Development (TDD).</p>
<figure id="fig:ismi-round-trip">
<a href="figures/ismi-round-trip.png" data-lightbox="figures" data-title="Figure 1: Round-trip migration from the old OpenMind database model via a X3ML mapping to the new CIDOC-CRM RDF database model and back into the OpenMind model through a Python mapping allowing a Python comparison tool to test the result in the same kind of model."><img
src="figures/ismi-round-trip.png" style="width:80.0%" /></a>
<figcaption>Figure 1: Round-trip migration from the old OpenMind
database model via a X3ML mapping to the new CIDOC-CRM RDF database
model and back into the OpenMind model through a Python mapping allowing
a Python comparison tool to test the result in the same kind of
model.</figcaption>
</figure>
<p>The comparison tool has options to selectively enable or disable
certain checks or exclude specific relation, attribute, or entity types
as shown in Listing <a href="#code:ismi-compare">5</a>. These options
were used during the development process to focus on specific areas of
the transformation in order to not drown in thousands of unrelated error
messages, particularly during the early phase of development. Watching
the number of errors go down was also a satisfying measure of
development progress.</p>
<figure class="float listing" id="code:ismi-compare">
<div class="float-body listing">
<pre><code class="language-text">usage: compare_models.py [-h] [--version] [--ignore-nodes IGNORE_NODES]
                         [--ignore-attributes IGNORE_ATTRIBUTES]
                         [--ignore-relations IGNORE_RELATIONS] [--show-nodes] [--show-relations]
                         [--show-attributes] [--check-attribute-content] [-l {INFO,DEBUG,ERROR}]
                         file1 file2

Compare two networkx graphs with ISMI data.

positional arguments:
  file1                 First networkx graph in gpickle format
  file2                 Second networkx graph in gpickle format

options:
  -h, --help            show this help message and exit
  --version             show program's version number and exit
  --ignore-nodes IGNORE_NODES
                        list of node types to ignore (comma-separated)
  --ignore-attributes IGNORE_ATTRIBUTES
                        list of attributes to ignore on all entities (comma-separated)
  --ignore-relations IGNORE_RELATIONS
                        list of relations to ignore on all entities (comma-separated)
  --show-nodes          show node differences in detail
  --show-relations      show relation differences in detail
  --show-attributes     show attribute differences in detail
  --check-attribute-content
                        check attribute content (optional)</code></pre>
  
  
</div>
<figcaption>Listing 5: Command line options for the Python model comparison tool compare\_models, including options to show more or less detailed differences or to ignore specific item, attribute, or relation types.</figcaption>
</figure>
<h1 data-number="6" id="conclusion"><span
class="header-section-number">6</span> Conclusion</h1>
<div id="tab:method-abilities">
<table>
<caption>Table 1: Detection abilities and complexity cost of three
methods.</caption>
<thead>
<tr>
<th style="text-align: left;">Method</th>
<th style="text-align: left;"> Detect dropped or added entities</th>
<th style="text-align: left;"> Detect corrupted entities</th>
<th style="text-align: center;">Complexity</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">1: Count entities before and after
transformation</td>
<td style="text-align: left;"> yes (if total number changes)</td>
<td style="text-align: left;"> no</td>
<td style="text-align: center;">low</td>
</tr>
<tr>
<td style="text-align: left;">2: Keep track of entities during
transformation</td>
<td style="text-align: left;"> yes</td>
<td style="text-align: left;"> possible</td>
<td style="text-align: center;">medium</td>
</tr>
<tr>
<td style="text-align: left;">3: Round-trip entities and compare
result</td>
<td style="text-align: left;"> yes</td>
<td style="text-align: left;"> yes</td>
<td style="text-align: center;">high</td>
</tr>
</tbody>
</table>
</div>
<p>The three basic methods for testing data integrity presented here
have different strengths and weaknesses and every developer needs to
weigh these against the requirements of the individual project and the
available development resources.
Table <a href="#tab:method-abilities">1</a> shows an overview of the
methods and their ability to detect dropped or added or corrupted
entities versus the implementation complexity.</p>
<p>Creating and running different kinds of tests has become an integral
part of good practice of software development in general. Tests let you
trust your own code during and after active development. Tests also let
others that review or use your code, trust the code. Tests can also be
an active part of the development process when they allow to measure
progress during the early phases of development or when they help to
detect and avoid regressions when refactoring the code. The basic
methods of end-to-end testing of data integrity shown here can be part
of every developer’s toolbox of tests to apply, depending on the
requirements of the development project.</p>
<p>Another good practice of software development is the sharing of code
in—preferably public—repositories to enable code review, re-use, or just
the sharing of programming techniques and ideas. The repositories
containing the scripts used as examples for methods 1 and 2 are not
publicly available, but the scripts used for method 3 are available as
part of the ISMI data model repository.<a href="#fn9"
class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p>
<h1 class="unnumbered" id="bibliography">References</h1>
<div id="refs" class="references csl-bib-body" data-entry-spacing="0"
role="list">
<div id="ref-damerow_code_2025" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div
class="csl-right-inline">Damerow J, Koeser RS, Carver JC, Vogl M. Code
review in digital humanities. Digital Scholarship in the Humanities
2025;40:i18–26. <a
href="https://doi.org/10.1093/llc/fqae052">https://doi.org/10.1093/llc/fqae052</a>.</div>
</div>
<div id="ref-leloudas_introduction_2023" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[2] </div><div
class="csl-right-inline">Leloudas P. Introduction to
<span>Software</span> <span>Testing</span>: <span>A</span>
<span>Practical</span> <span>Guide</span> to <span>Testing</span>,
<span>Design</span>, <span>Automation</span>, and
<span>Execution</span>. Berkeley, CA: Apress; 2023. <a
href="https://doi.org/10.1007/978-1-4842-9514-4">https://doi.org/10.1007/978-1-4842-9514-4</a>.</div>
</div>
</div>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p><a
href="https://docs.djangoproject.com/en/5.2/topics/db/models/"
class="uri">https://docs.djangoproject.com/en/5.2/topics/db/models/</a><a
href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a href="https://drupal.org/"
class="uri">https://drupal.org/</a><a href="#fnref2"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a href="https://researchspace.org/"
class="uri">https://researchspace.org/</a><a href="#fnref3"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="https://cidoc-crm.org/"
class="uri">https://cidoc-crm.org/</a><a href="#fnref4"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><a href="https://www.zope.dev/"
class="uri">https://www.zope.dev/</a><a href="#fnref5"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><a href="https://ismi.mpiwg-berlin.mpg.de"
class="uri">https://ismi.mpiwg-berlin.mpg.de</a><a href="#fnref6"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p><a href="https://cidoc-crm.org/frbroo/"
class="uri">https://cidoc-crm.org/frbroo/</a><a href="#fnref7"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p><a href="https://github.com/isl/x3ml"
class="uri">https://github.com/isl/x3ml</a><a href="#fnref8"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p><a
href="https://gitlab.gwdg.de/MPIWG/Department-II/ismi-cidoc-model/-/tree/master/Tools/graph-tools"
class="uri">https://gitlab.gwdg.de/MPIWG/Department-II/ismi-cidoc-model/-/tree/master/Tools/graph-tools</a><a
href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="content has-text-centered">
      <p>
        <strong>Anthology of Computers and the Humanities</strong> · Association for Computers and the Humanities
      </p>
      <p class="is-size-7">
        Paper © 2025 the authors. All other content © 2025 ACH.
      </p>
    </div>
  </footer>

  
  <script>
    // Navbar burger menu functionality
    document.addEventListener('DOMContentLoaded', () => {
      // Get all "navbar-burger" elements
      const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
    
      // Add a click event on each of them
      $navbarBurgers.forEach( el => {
        el.addEventListener('click', () => {
          // Get the target from the "data-target" attribute
          const target = el.dataset.target;
          const $target = document.getElementById(target);
    
          // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
          el.classList.toggle('is-active');
          $target.classList.toggle('is-active');
        });
      });
    });
  </script>

  <!-- Lightbox JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js"></script>

  <!-- Prism.js for syntax highlighting -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-xml.min.js"></script>

  <script>
    // Configure Lightbox
    lightbox.option({
      'resizeDuration': 200,
      'wrapAround': true,
      'albumLabel': 'Image %1 of %2',
      'fadeDuration': 300,
      'imageFadeDuration': 300
    });

    // Add copy buttons to code blocks
    document.addEventListener('DOMContentLoaded', function() {
      // Find all code blocks (both .sourceCode and figure-wrapped ones)
      const codeBlocks = document.querySelectorAll('div.sourceCode, div.float-body.listing');

      // SVG icons
      const copyIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>';
      const checkIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/></svg>';

      codeBlocks.forEach(function(block) {
        // Create copy button
        const button = document.createElement('button');
        button.className = 'code-copy-button';
        button.innerHTML = copyIcon;
        button.setAttribute('aria-label', 'Copy code to clipboard');
        button.setAttribute('title', 'Copy code');

        // Add click handler
        button.addEventListener('click', function() {
          // Get the code content
          const code = block.querySelector('code');
          const text = code.textContent;

          // Copy to clipboard
          navigator.clipboard.writeText(text).then(function() {
            // Show success feedback
            button.innerHTML = checkIcon;
            button.classList.add('copied');
            button.setAttribute('title', 'Copied!');

            // Reset button after 2 seconds
            setTimeout(function() {
              button.innerHTML = copyIcon;
              button.classList.remove('copied');
              button.setAttribute('title', 'Copy code');
            }, 2000);
          }).catch(function(err) {
            console.error('Failed to copy text: ', err);
            button.innerHTML = '✕';
            setTimeout(function() {
              button.innerHTML = copyIcon;
            }, 2000);
          });
        });

        // Insert button into the code block container
        block.appendChild(button);
      });

      // Re-run Prism highlighting if needed
      if (typeof Prism !== 'undefined') {
        Prism.highlightAll();
      }
    });
  </script>

</body>
</html>